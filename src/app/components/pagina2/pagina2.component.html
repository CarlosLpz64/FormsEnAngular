<h2> Formularios reactivos</h2>
<div class="container">

    <form [formGroup]="miFormulario">
      <!-- USUARIO -->
      Usuario: 
      <input 
      [class.is-invalid]="miFormulario.get('username')?.touched 
      && miFormulario.get('username')?.invalid" 
      type="text" class="form-control" 
      formControlName="username">

      <div
      *ngIf="miFormulario.get('username')?.touched 
      && miFormulario.get('username')?.invalid">
        <div class="msgError"> El usuario debe contener al menos 3 caracteres</div>
      </div>
  
      <!-- EMAIL -->

      Email: 
      <input 
      [class.is-invalid]="miFormulario.get('email')?.touched 
      && miFormulario.get('email')?.invalid" 
      type="text" class="form-control" 
      formControlName="email">

      <div
      *ngIf="miFormulario.get('email')?.touched 
      && miFormulario.get('email')?.invalid">
        <div class="msgError"> Por favor inserte un correo válido </div>
      </div>

      <!-- PASSWORD -->
  
      Password: 
      <input 
      [class.is-invalid]="miFormulario.get('userpassword')?.touched 
      && miFormulario.get('userpassword')?.invalid"
      type="text" 
      class="form-control"
      pattern="(?=.{10,}$)(?=.*?[a-z])(?=.*?[A-Z])(?=.*?[0-9])(?=.*?\W).*$"  
      formControlName="userpassword">
      
      <div
      *ngIf="miFormulario.get('userpassword')?.touched 
      && miFormulario.get('userpassword')?.invalid">
        <div class="msgError"> La contraseña debe incluir al menos 10 caracteres, usar al menos una mayúscula, una minúscula y un caracter especial</div>
      </div>

      <!-- EDAD -->

      Edad: 
      <input 
      [class.is-invalid]="miFormulario.get('edad')?.touched 
      && miFormulario.get('edad')?.invalid"
      type="text" 
      class="form-control"
      pattern="[0-9]+" 
      formControlName="edad">

      <div
      *ngIf="miFormulario.get('edad')?.touched 
      && miFormulario.get('edad')?.invalid">
        <div class="msgError"> Por favor inserte una edad válida</div>
      </div>

      <!-- CURP -->

      CURP: 
      <input 
      [class.is-invalid]="miFormulario.get('curp')?.touched 
      && miFormulario.get('curp')?.invalid"
      type="text" 
      class="form-control"
      pattern="^[A-Z]{1}[AEIOU]{1}[A-Z]{2}[0-9]{2}(0[1-9]|1[0-2])(0[1-9]|1[0-9]|2[0-9]|3[0-1])[HM]{1}(AS|BC|BS|CC|CS|CH|CL|CM|DF|DG|GT|GR|HG|JC|MC|MN|MS|NT|NL|OC|PL|QT|QR|SP|SL|SR|TC|TS|TL|VZ|YN|ZS|NE)[B-DF-HJ-NP-TV-Z]{3}[0-9A-Z]{1}[0-9]{1}$" 
      formControlName="curp"> 

      <div
      *ngIf="miFormulario.get('curp')?.touched 
      && miFormulario.get('curp')?.invalid">
        <div class="msgError"> Por favor inserte un CURP válido</div>
      </div>

      <!-- BOTÓN -->
      
      <br>
      <div class="d-grid gap-2">
        <button class="btn btn-primary" type="submit"> Enviar </button>
      </div>
    </form>

    <br>
    {{ miFormulario.value | json}}
  </div>